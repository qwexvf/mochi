# Generated by mochi

"""
A user who can write posts and comments
"""
type User {
  id: ID!
  username: String!
  email: String!
  displayName: String
  bio: String
  avatarUrl: String
  posts: [Post!]!
  comments: [Comment!]!
  followers: [User!]!
  following: [User!]!
  createdAt: String!
}

"""
A blog post with content and metadata
"""
type Post {
  id: ID!
  title: String!
  slug: String!
  content: String!
  excerpt: String
  coverImage: String
  author: User!
  tags: [Tag!]!
  comments: [Comment!]!
  likes: Int!
  views: Int!
  published: Boolean!
  publishedAt: String
  createdAt: String!
  updatedAt: String!
}

"""
A comment on a post
"""
type Comment {
  id: ID!
  content: String!
  author: User!
  post: Post!
  parentComment: Comment
  replies: [Comment!]!
  likes: Int!
  createdAt: String!
}

"""
A tag for categorizing posts
"""
type Tag {
  id: ID!
  name: String!
  slug: String!
  posts: [Post!]!
  postCount: Int!
}

"""
Post status for filtering
"""
enum PostStatus {
  DRAFT
  PUBLISHED
  ARCHIVED
}

"""
Sort order for listings
"""
enum SortOrder {
  ASC
  DESC
}

"""
Input for creating a new post
"""
input CreatePostInput {
  title: String!
  content: String!
  excerpt: String
  coverImage: String
  tags: [String!]
  published: Boolean
}

"""
Input for updating an existing post
"""
input UpdatePostInput {
  title: String
  content: String
  excerpt: String
  coverImage: String
  tags: [String!]
  published: Boolean
}

"""
Input for pagination
"""
input PaginationInput {
  page: Int
  limit: Int
}

"""
Input for filtering posts
"""
input PostFilterInput {
  authorId: ID
  tagSlug: String
  status: PostStatus
  search: String
}

type Query {
  "Get current authenticated user"
  me: User
  "Get a user by ID"
  user(id: ID!): User
  "Get a user by username"
  userByUsername(username: String!): User
  "Get a post by ID"
  post(id: ID!): Post
  "Get a post by slug"
  postBySlug(slug: String!): Post
  "List posts with filtering and pagination"
  posts(filter: PostFilterInput, pagination: PaginationInput, sortOrder: SortOrder): [Post!]!
  "Get all tags"
  tags: [Tag!]!
  "Get a tag by slug"
  tag(slug: String!): Tag
  "Search posts by query"
  searchPosts(query: String!, limit: Int): [Post!]!
}

type Mutation {
  "Create a new post"
  createPost(input: CreatePostInput!): Post!
  "Update an existing post"
  updatePost(id: ID!, input: UpdatePostInput!): Post!
  "Delete a post"
  deletePost(id: ID!): Boolean!
  "Publish a draft post"
  publishPost(id: ID!): Post!
  "Unpublish a post"
  unpublishPost(id: ID!): Post!
  "Add a comment to a post"
  addComment(postId: ID!, content: String!, parentCommentId: ID): Comment!
  "Delete a comment"
  deleteComment(id: ID!): Boolean!
  "Like a post"
  likePost(id: ID!): Post!
  "Unlike a post"
  unlikePost(id: ID!): Post!
  "Follow a user"
  followUser(id: ID!): User!
  "Unfollow a user"
  unfollowUser(id: ID!): User!
  "Update user profile"
  updateProfile(displayName: String, bio: String, avatarUrl: String): User!
}

type Subscription {
  "Subscribe to new posts"
  postCreated: Post!
  "Subscribe to new comments on a post"
  commentAdded(postId: ID!): Comment!
  "Subscribe to post updates"
  postUpdated(id: ID!): Post!
}